{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/Alhilly/Desktop/social-dev/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/Alhilly/Desktop/social-dev/src/components/auth/SignUp.js\";\nimport React from 'react';\nimport OktaAuth from '@okta/okta-auth-js';\nimport { withAuth } from '@okta/okta-react';\nimport config from '../../app.config';\nexport default withAuth(\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RegistrationForm, _React$Component);\n\n  function RegistrationForm(props) {\n    var _this;\n\n    _classCallCheck(this, RegistrationForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RegistrationForm).call(this, props));\n    _this.state = {\n      firstName: '',\n      lastName: '',\n      email: '',\n      password: '',\n      sessionToken: null\n    };\n    _this.oktaAuth = new OktaAuth({\n      url: config.url\n    });\n    _this.checkAuthentication = _this.checkAuthentication.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this.checkAuthentication();\n\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleFirstNameChange = _this.handleFirstNameChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleLastNameChange = _this.handleLastNameChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleEmailChange = _this.handleEmailChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePasswordChange = _this.handlePasswordChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(RegistrationForm, [{\n    key: \"checkAuthentication\",\n    value: function () {\n      var _checkAuthentication = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var sessionToken;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.props.auth.getIdToken();\n\n              case 2:\n                sessionToken = _context.sent;\n\n                if (sessionToken) {\n                  this.setState({\n                    sessionToken: sessionToken\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function checkAuthentication() {\n        return _checkAuthentication.apply(this, arguments);\n      }\n\n      return checkAuthentication;\n    }()\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.checkAuthentication();\n    }\n  }, {\n    key: \"handleFirstNameChange\",\n    value: function handleFirstNameChange(e) {\n      this.setState({\n        firstName: e.target.value\n      });\n    }\n  }, {\n    key: \"handleLastNameChange\",\n    value: function handleLastNameChange(e) {\n      this.setState({\n        lastName: e.target.value\n      });\n    }\n  }, {\n    key: \"handleEmailChange\",\n    value: function handleEmailChange(e) {\n      this.setState({\n        email: e.target.value\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(e) {\n      this.setState({\n        password: e.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      fetch('/api/users', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state)\n      }).then(function (user) {\n        _this2.oktaAuth.signIn({\n          username: _this2.state.email,\n          password: _this2.state.password\n        }).then(function (res) {\n          return _this2.setState({\n            sessionToken: res.sessionToken\n          });\n        });\n      }).catch(function (err) {\n        return console.log;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.sessionToken) {\n        this.props.auth.redirect({\n          sessionToken: this.state.sessionToken\n        });\n        return null;\n      }\n\n      return React.createElement(\"form\", {\n        className: \"form-group\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Email:\"), React.createElement(\"input\", {\n        type: \"email\",\n        id: \"email\",\n        value: this.state.email,\n        onChange: this.handleEmailChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"First Name:\"), React.createElement(\"input\", {\n        type: \"text\",\n        id: \"firstName\",\n        value: this.state.firstName,\n        onChange: this.handleFirstNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Last Name:\"), React.createElement(\"input\", {\n        type: \"text\",\n        id: \"lastName\",\n        value: this.state.lastName,\n        onChange: this.handleLastNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        value: this.state.password,\n        onChange: this.handlePasswordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        id: \"submit\",\n        value: \"Register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RegistrationForm;\n}(React.Component));","map":{"version":3,"sources":["/Users/Alhilly/Desktop/social-dev/src/components/auth/SignUp.js"],"names":["React","OktaAuth","withAuth","config","props","state","firstName","lastName","email","password","sessionToken","oktaAuth","url","checkAuthentication","bind","handleSubmit","handleFirstNameChange","handleLastNameChange","handleEmailChange","handlePasswordChange","auth","getIdToken","setState","e","target","value","preventDefault","fetch","method","headers","Accept","body","JSON","stringify","then","user","signIn","username","res","catch","err","console","log","redirect","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport OktaAuth from '@okta/okta-auth-js';\nimport { withAuth } from '@okta/okta-react';\n\nimport config from '../../app.config';\n\nexport default withAuth(\n  class RegistrationForm extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        firstName: '',\n        lastName: '',\n        email: '',\n        password: '',\n        sessionToken: null\n      };\n      this.oktaAuth = new OktaAuth({ url: config.url });\n      this.checkAuthentication = this.checkAuthentication.bind(this);\n      this.checkAuthentication();\n\n      this.handleSubmit = this.handleSubmit.bind(this);\n      this.handleFirstNameChange = this.handleFirstNameChange.bind(this);\n      this.handleLastNameChange = this.handleLastNameChange.bind(this);\n      this.handleEmailChange = this.handleEmailChange.bind(this);\n      this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    }\n\n    async checkAuthentication() {\n      const sessionToken = await this.props.auth.getIdToken();\n      if (sessionToken) {\n        this.setState({ sessionToken });\n      }\n    }\n\n    componentDidUpdate() {\n      this.checkAuthentication();\n    }\n\n    handleFirstNameChange(e) {\n      this.setState({ firstName: e.target.value });\n    }\n    handleLastNameChange(e) {\n      this.setState({ lastName: e.target.value });\n    }\n    handleEmailChange(e) {\n      this.setState({ email: e.target.value });\n    }\n    handlePasswordChange(e) {\n      this.setState({ password: e.target.value });\n    }\n\n    handleSubmit(e) {\n      e.preventDefault();\n      fetch('/api/users', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state)\n      })\n        .then(user => {\n          this.oktaAuth\n            .signIn({\n              username: this.state.email,\n              password: this.state.password\n            })\n            .then(res =>\n              this.setState({\n                sessionToken: res.sessionToken\n              })\n            );\n        })\n        .catch(err => console.log);\n    }\n\n    render() {\n      if (this.state.sessionToken) {\n        this.props.auth.redirect({ sessionToken: this.state.sessionToken });\n        return null;\n      }\n\n      return (\n        <form className=\"form-group\" onSubmit={this.handleSubmit}>\n          <div className=\"form\">\n            <label>Email:</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={this.state.email}\n              onChange={this.handleEmailChange}\n            />\n          </div>\n          <div className=\"form-element\">\n            <label>First Name:</label>\n            <input\n              type=\"text\"\n              id=\"firstName\"\n              value={this.state.firstName}\n              onChange={this.handleFirstNameChange}\n            />\n          </div>\n          <div className=\"form-element\">\n            <label>Last Name:</label>\n            <input\n              type=\"text\"\n              id=\"lastName\"\n              value={this.state.lastName}\n              onChange={this.handleLastNameChange}\n            />\n          </div>\n          <div className=\"form-element\">\n            <label>Password:</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={this.state.password}\n              onChange={this.handlePasswordChange}\n            />\n          </div>\n          <input type=\"submit\" id=\"submit\" value=\"Register\" />\n        </form>\n      );\n    }\n  }\n);"]},"metadata":{},"sourceType":"module"}